{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Result</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sniglet:wght@400;800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{% static "favicon.ico" %}">
</head>
<body>
<article class="sidebar">
    <a class="sniglet" href="{% url "profile_page" username=request.user.username %}"><img src="{% static "/leeri_logo.png" %}" style="height: 30%; width: 115%; margin-left: -10px; margin-bottom: -50px" alt="leari on a plane"></a>
    <p class="sniglet" style="color: white; font-size: 30px">Airplane Learning</p>
    <a class="sniglet" href="{% url "profile_page" username=request.user.username %}">>Go to profile</a>
    <br>
    <br>
    <a class="sniglet" style="font-size: 15px" href="{% url "modules_list" language_id=user.profile.chosen_language.id %}">Go to available modules</a>
    <br>
    <br>
    <a class="sniglet" style="font-size: 15px" href="/forums">Go to discussion forums</a>
    <br>
    <br>
    <a href="{% url 'profile_settings' %}" class="sniglet" style="font-size: 15px; ">Go to settings</a>
    <br>
    <br>
    <a class="sniglet" style="font-size: 15px" href="{% url 'about' %}">About</a>
    <br>
    <br>
    <a class="sniglet" style="font-size: 15px" href="{% url 'logout' %}">Log out</a>
    <footer class="sniglet" style="bottom: 45px; left: 75px">
        <p>Â© gearbeagel</p>
    </footer>
</article>

<h1 class="sniglet" style="margin-left: 800px">Quiz Result</h1>
<br>
<ul style="margin-left: 250px; list-style-type: none">
    {% for question, data in quiz_data.items %}
<li class="sniglet" style='padding: 10px; border: #d39c3f 3px solid; border-radius: 25px; width: fit-content'>
    <strong>Question:</strong> {{ question.text }}<br>
    <hr style="border: none; border-top: 3px solid #d39c3f; width: auto; margin-top: 10px; margin-bottom: 10px">
    <strong>Correct Answer:</strong> 
    {% if data.correct_answer %}
        {% if question.question_type == 'Multiple Choice' %}
            {% if data.correct_answer|length > 1 %}
                <ul>
                {% for answer in data.correct_answer %}
                    <li>{{ answer }}</li>
                {% endfor %}
                </ul>
            {% else %}
                {{ data.correct_answer|join:','}}
            {% endif %}
        {% else %}
            {% for answer in data.correct_answer %}
                {{ answer }}
                {% endfor %}
        {% endif %}
    {% else %}
        No answer provided
    {% endif %}
    <br>
    <strong>Your Answer:</strong> 
    {% if data.user_answer %}
        {% if question.question_type == 'Multiple Choice' %}
            <ul>
            {% for answer in data.user_answer %}
                <li>{{ answer }}</li>
            {% endfor %}
            </ul>
        {% else %}
            {{ data.user_answer }}
        {% endif %}
    {% else %}
        No answer provided
    {% endif %}
    <hr style="border: none; border-top: 3px solid #d39c3f; width: 100%; margin-top: 10px; margin-bottom: 10px">
    {% if data.is_correct == "Correct" %}
    <span style="color: green;"><strong>Result:</strong> Correct</span><br>
    {% else %}
    <span style="color: red;"><strong>Result:</strong> Incorrect</span><br>
    {% endif %}
</li>
<br>
{% endfor %}
</ul>
<a href="{% url "modules_list" language_id=user.profile.chosen_language.id %}" style="margin-left: 290px"><button>Go back to all modules</button></a>
</body>
</html>